模块一：基础服务层 (Foundation Layer)
这是满足寝室基本协作记账需求的基础（基于你提供的核心需求优化）：

1.1 多维账户与成员管理

6. **虚拟寝室架构**：支持创建“虚拟寝室”并添加室友信息（支持自定义头像、昵称）。
    - **邀请机制**：
        - 点击邀请按钮弹出对话框，输入好友账号（邮箱/用户名）。
        - 系统发送邀请通知给对方。
        - 对方在“消息”页面收到邀请卡片，点击“同意”后自动加入对应账本。

7. **多账本切换与创建**：
    - **创建账本**：支持用户新建账本，需输入账本名称（必填）、描述（可选）及选择结算币种（CNY/USD/EUR）。
    - **切换**：支持用户在多个账本（如“302寝室日常”、“毕业旅游专账”）之间自由切换，数据逻辑隔离。

1.2 智能记账 (Smart CRUD)

多样化分摊引擎：

完全均分：总额除以人数，除不尽的余数自动归入发起人。

按权重分摊：适用于特殊场景（如情侣占2份，单身占1份，比例 2:1:1）。

指定金额：手动输入每人应付的确切金额。

全字段记录：每笔账单强制包含金额、分类（餐饮/交通/水电）、日期、结构化备注及垫付人信息。

1.3 实时结算中心

债务可视化看板：实时动态显示债务网络（例如：李四 -> 张三 50元），实现账目透明化。

一键核销：支持记录“还款”操作，系统自动更新剩余债务，或支持“抹平”零头功能。

1.4 智能日历视图 (Smart Calendar)

多视图切换：
- **月视图 (Month View)**：以月历形式展示每日支出概况。每日单元格显示当天的总消费金额点（如有消费标记颜色点），直观呈现月度消费热力分布。
- **周视图 (Week View)**：以周为维度（周一至周日）展示详细的每日消费柱状图或列表，方便用户快速回顾本周具体的开销趋势。

交互细节：
- 点击具体日期，下方列表展开显示当天的所有账单明细（时间、类别、金额、参与人）。
- 支持左右滑动切换月份或周次。

1.5 财务报表与导出 (Financial Reporting)
- **自定义报表**：支持用户选择任意时间段（起始日期 - 结束日期）。
- **数据导出**：支持将选定时间段内的所有消费记录生成 Excel 表格（客户端生成），并导出到本地，方便进行深度数据分析或归档。

🚀 模块二：创新业务层 (Innovation Layer)
这是凸显软件工程专业能力的核心差异化功能：

2.1 多模态智能录入 (AI Entry)

NLP 语义一键记账：输入“昨晚海底捞四人花了300”，通过正则状态机自动解析【金额:300, 模式:均分, 分类:餐饮】。

OCR 相机扫单：集成 Google ML Kit，拍摄小票自动提取总金额与日期。

2.2 债务拓扑优化策略 (Debt Simplification Strategy)

痛点：解决多人转账环路问题（A欠B，B欠C，C欠A）。

算法：基于图论 (Graph Theory) 的最大流简化算法。系统在结算前自动重构有向图，消除中间节点，将转账路径压缩至最短。

效果：若 A->B 10元, B->C 10元，系统自动合并为 A->C 10元。

2.3 “今天吃什么”群决策系统 (AHP Decision Support)
- **核心流程**：
    1. **发起**：发起人可在首页点击入口，填入2-n个选项（或选择系统随机）。
        - **投票模式**：提交选项，服务端通知所有成员参与投票。
        - **随机模式**：系统直接随机选择一个选项并通知所有成员结果。
    2. **投票**：
        - 成员收到通知后进入投票页面，选择一个心仪选项。
        - **匿名机制**：投票过程完全匿名。
        - **权重计算**：基于“金主”逻辑（当前垫付金额最高者权重 1.5），其他成员权重 1.0。
    3. **结果**：
        - 所有成员投票完成后，系统计算最高分选项（加权总分）。
        - 系统推送最终结果通知。

2.4 防篡改哈希审计 (Hash Chain Audit)

机制：构建资金哈希链。Current_Hash = SHA256(Pre_Hash + Amount + Payer + Time)。

功能：提供“账本审计”按钮，一键校验数据完整性，防止数据库被恶意篡改。

2.5 个人中心看板 (Personal Dashboard)
- **核心数据卡片**：
    - **我垫付的**：显示当前用户本月垫付的总金额，并对比上月涨跌幅（例如：+12% vs 上月）。
    - **我的消费**：显示当前用户本月累计的个人消费总额。

2.6 卫生博弈系统：“因果报应”轮盘 (Karma Roulette)
- **核心理念**：将枯燥的值日表改为基于权重的概率博弈。
    - **初始人品**：每个人初始权重为 100 (Base Weight)。
    - **金主特权 (Gold Status)**：当前垫付金额最高者，权重固定减少 30% (即 Base * 0.7)。
    - **积分减负 (Karma Points)**：
        -   **机制**：主动干活获取“人品值”，直接抵扣权重。`最终权重 = BaseWeight * (GoldStatus ? 0.7 : 1.0) - 当前人品值`。最低权重为 10。
        -   **任务分值**：
            -   倒垃圾：+5 人品
            -   取快递/买东西：+10 人品
            -   带饭：+15 人品
            -   刷马桶/洗厕所：+20 人品
    - **惩罚机制**：被抽中“倒霉蛋”后，人品值清零（或重置为 0），权重恢复。
- **流程**：
    1.  **可视化转盘**：扇形面积 = 个人权重 / 总权重。
    2.  **主动干活**：用户选择预设任务（下拉选择），提交后即时获得人品值，转盘肉眼可见变小。
- **流程**：
    1.  **可视化转盘**：页面展示当前所有成员的“中奖”概率扇形图，用户可见自己当前占比。
    2.  **主动干活 (Active Work)**：
        -   用户选择干活类别并输入描述。
        -   提交后系统降低其下次被抽中的权重。
        -   系统通知全员：“XXX 主动完成了 YYY，人品大爆发！”
    3.  **随机抽取 (Random Draw)**：
        -   发起人填写待分配任务（如“刷马桶”）。
        -   点击抽取，转盘转动，基于当前权重选出“倒霉蛋”。
        -   系统通知全员：“恭喜 XXX 喜提 刷马桶 大奖！”